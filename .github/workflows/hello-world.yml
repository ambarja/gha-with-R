# Event - What starts this workflow?
on: [push]

# Name of the workflow
name: hello-r-world

# Jobs - What the computer should do? 
jobs:
  write-message:
    # Use MacOs   
    runs-on: macos-latest 
    steps:
       # Install R
      - uses: r-lib/actions/setup-r@v2    
      - name: print-message   
        # Code to execute R script
        run: |
         Rscript -e 'install.packages("tidyverse")'
         Rscript -e 'install.packages("vroom")'
         Rscript -e 'script/00_get_data.R'
       # Add new files in data folder, commit along with other modified files, push
      - name: Commit files
        run: |
          git config --local user.name actions-user
          git config --local user.email "actions@github.com"
          git add data/*
          git commit -am "GH ACTION Headlines $(date)"
          git push origin master
        env:
          REPO_KEY: ${{secrets.GITHUB_TOKEN}}
          username: github-actions
